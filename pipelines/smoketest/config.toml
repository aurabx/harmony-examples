# ==============================================================================
# Harmony Comprehensive Smoketest Configuration
# ==============================================================================
# This configuration demonstrates all major Harmony features in one place:
#
# Features Tested:
# ✅ HTTP frontend endpoint
# ✅ HTTP backend connection  
# ✅ Path filtering middleware
# ✅ Content-type filtering
# ✅ Transform middleware (JOLT)
# ✅ JSON extraction
# ✅ Access control policies (IP allowlist, rate limiting)
# ✅ Method filtering
# ✅ Basic authentication
#
# This is designed as a comprehensive integration test, not a production config.
# ==============================================================================

[proxy]
id = "harmony-smoketest"
pipelines_path = "pipelines"
transforms_path = "transforms"

[logging]
log_level = "debug"
log_to_file = true
log_file_path = "./tmp/smoketest.log"

# ==============================================================================
# NETWORKS
# ==============================================================================

[network.default]
enable_wireguard = false
interface = "eth0"

[network.default.http]
bind_address = "0.0.0.0"
bind_port = 8080

[network.management]
enable_wireguard = false
interface = "eth0"

[network.management.http]
bind_address = "127.0.0.1"
bind_port = 9090

# ==============================================================================
# MANAGEMENT API
# ==============================================================================

[management]
enabled = true
base_path = "admin"
network = "management"

# ==============================================================================
# STORAGE
# ==============================================================================

[storage]
backend = "filesystem"

[storage.options]
path = "./tmp"

# ==============================================================================
# SERVICE TYPE REGISTRATIONS
# ==============================================================================

[services.http]
module = ""

[services.echo]
module = ""

[services.management]
module = ""

# ==============================================================================
# MIDDLEWARE TYPE REGISTRATIONS
# ==============================================================================

[middleware_types.policies]
module = ""

[middleware_types.basic_auth]
module = ""

[middleware_types.path_filter]
module = ""

[middleware_types.json_extractor]
module = ""

[middleware_types.transform]
module = ""

[middleware_types.passthru]
module = ""

# ==============================================================================
# TARGET DEFINITIONS
# ==============================================================================

[targets.local_test_server]
connection.host = "127.0.0.1"
connection.port = 8888
connection.protocol = "http"
timeout_secs = 60
