[
  {
    "comment": "Extract owner and type from query params",
    "operation": "shift",
    "spec": {
      "context": {
        "request_details": {
          "query_params": {
            "owner": {
              "0": "owner"
            },
            "type": {
              "0": "type"
            }
          }
        }
      }
    }
  },
  {
    "comment": "Build target_details.uri for FHIR backend with query params embedded in URI",
    "operation": "modify-overwrite-beta",
    "spec": {
      "uri": "=concat('/', @(1,type), '?owner=', @(1,owner))"
    }
  },
  {
    "comment": "Output uri to target_details - query_params cleared automatically when uri contains ?",
    "operation": "shift",
    "spec": {
      "uri": "context.target_details.uri"
    }
  }
]
