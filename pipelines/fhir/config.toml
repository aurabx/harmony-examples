# FHIR Passthrough Example Configuration
# Demonstrates FHIR endpoint proxying to a real FHIR server with bearer token authentication

[proxy]
id = "harmony-fhir"
pipelines_path = "pipelines"
primary_provider = "local"

# Provider Configuration
[provider.runbeam]
api = "https://api.runbeam.cloud"
poll_interval_secs = 30

# Network configuration
[network.http_net]
enable_wireguard = false
interface = "wg0"

[network.http_net.http]
bind_address = "127.0.0.1"
bind_port = 8081

# Logging
[logging]
log_level = "debug"
log_to_file = true
log_file_path = "./tmp/harmony_fhir.log"

# Storage
[storage]
backend = "filesystem"

[storage.options]
path = "./tmp"

# Service types
[services.http]
module = ""

[services.echo]
module = ""

[services.fhir]
module = ""

# Middleware types
[middleware_types.json_extractor]
module = ""

[middleware_types.passthru]
module = ""

[middleware_types.policies]
module = ""

[middleware_types.basic_auth]
module = ""

# ------------------------
# Authentication Definitions
#-------------------------
[authentications.fhir_bearer]
id = "fhir_bearer"
method = "bearer"

[authentications.fhir_bearer.options]
token = "abc123"  # Replace with actual bearer token

# ------------------------
# Target Definitions
#-------------------------
[targets.fire_ly_fhir]
connection.host = "server.fire.ly"
connection.protocol = "https"
connection.base_path = "/r4"
authentication = "authentications.fhir_bearer"
timeout_secs = 60

